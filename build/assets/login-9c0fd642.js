import{o as L,r as l,aR as I,j as e,S as u,a9 as j,aE as B,aM as E,l as F,aS as P,L as A,B as U,aT as R,aQ as W,e as q,T as M,U as N,aU as w,W as D}from"./index-0fbb4f05.js";function G(){const r=L();return l.useMemo(()=>({back:()=>r(-1),forward:()=>r(1),reload:()=>window.location.reload(),push:a=>r(a),replace:a=>r(a,{replace:!0})}),[r])}const O={email:"",password:""};function Q(){const r=I(),h=G(),[a,v]=l.useState(O),[i,y]=l.useState({}),[S,c]=l.useState(!1),m=n=>{const{name:t,value:o}=n.target;v({...a,[t]:o})},k=(n=a)=>{const t={...i};return"email"in n&&(t.email=n.email?"":"This field requires"),"password"in n&&(t.password=n.password?"":"This field requires"),y({...t}),Object.values(t).every(o=>o==="")},[d,T]=l.useState(!1),b=async n=>{var t,o,p,g,x,f;if(c(!0),n.preventDefault(),k())try{const s=await N.login(a);((t=s==null?void 0:s.data)==null?void 0:t.success)===!0&&(c(!1),w.success((o=s==null?void 0:s.data)==null?void 0:o.message),localStorage.setItem("smart-token",(g=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:g.accessToken),h.push("/dashboard"))}catch(s){c(!1),w.error((f=(x=s==null?void 0:s.response)==null?void 0:x.data)==null?void 0:f.message)}else c(!1)},C=e.jsxs(e.Fragment,{children:[e.jsxs(u,{spacing:3,children:[e.jsx(j,{label:"Email address",name:"email",error:!!i.email,onChange:m,helperText:i.email,value:a.email}),e.jsx(j,{name:"password",error:!!i.password,onChange:m,helperText:i.password,value:a.password,label:"Password",type:d?"text":"password",InputProps:{endAdornment:e.jsx(B,{position:"end",children:e.jsx(E,{onClick:()=>T(!d),edge:"end",children:e.jsx(F,{icon:d?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),e.jsx(u,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:e.jsx(P,{to:"/forget-password",className:"hyper-link",children:"Forgot password?"})}),e.jsx(A,{fullWidth:!0,isLoading:S,variant:"contained",onClick:b,children:"Login"})]});return e.jsx(U,{sx:{...R({color:W(r.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:e.jsx(u,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(q,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(M,{variant:"h4",children:"Sign in to Smart Academy"}),e.jsx("br",{}),C]})})})}function z(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:" Login | Smart Academy "})}),e.jsx(Q,{})]})}export{z as default};
