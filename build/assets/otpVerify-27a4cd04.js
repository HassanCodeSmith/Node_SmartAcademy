import{ap as X,a9 as _,aW as T,j as r,B as U,aR as q,aX as J,o as Y,r as M,S as L,aT as Z,aQ as ee,aV as te,e as ae,T as ne,U as se,aU as B,W as re}from"./index-0fbb4f05.js";import{L as oe}from"./LoadingButton-cfe44e19.js";const ie=X(_)`
  input {
    text-align: center;
  }
`,ce={TextFieldStyled:ie},le=s=>r.jsx(ce.TextFieldStyled,{...s}),S={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function ue(s,a){return s<=0?[]:Array.from({length:s},a)}function fe(s,a,m){return s.map((c,P)=>a===P?m:c)}function N(s){return s.join("")}function W(s,a){return[...s,a]}function pe(s,a,m){return s.reduce((c,P,o)=>{const{characters:j,restArrayMerged:f}=c;if(o<m)return{restArrayMerged:f,characters:W(j,P)};const[k,...D]=f;return{restArrayMerged:D,characters:W(j,k||"")}},{restArrayMerged:a,characters:[]}).characters}function de(s){return s.split("")}function $(s){const a=T.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return T.useInsertionEffect(()=>{a.current=s}),T.useCallback((...m)=>{var c;return(c=a.current)==null?void 0:c.call(a,...m)},[])}const ge=()=>!0,he=T.forwardRef((s,a)=>{const{value:m="",length:c=4,autoFocus:P=!1,onChange:o,TextFieldsProps:j,onComplete:f,validateChar:k=ge,className:D,onBlur:F,...w}=s,O=T.useRef(m),u=$(f),g=$(e=>{const t=e.slice(0,c);return{isCompleted:t.length===c,finalValue:t}});T.useEffect(()=>{const{isCompleted:e,finalValue:t}=g(O.current);e&&u(t)},[c,u,g]);const p=ue(c,(e,t)=>({character:m[t]||"",inputRef:T.createRef()})),R=e=>p.findIndex(({inputRef:t})=>t.current===e),V=()=>p.map(({character:e})=>e),A=(e,t)=>{const n=fe(V(),e,t);return N(n)},K=e=>{var t,n;(n=(t=p[e])==null?void 0:t.inputRef.current)==null||n.focus()},h=e=>{var t,n;(n=(t=p[e])==null?void 0:t.inputRef.current)==null||n.select()},I=e=>{e+1!==c&&(p[e+1].character?h(e+1):K(e+1))},E=(e,t)=>typeof k!="function"?!0:k(e,t),z=e=>{const t=R(e.target);if(t===0&&e.target.value.length>1){const{finalValue:v,isCompleted:C}=g(e.target.value);o==null||o(v),C&&(f==null||f(v)),h(v.length-1);return}const n=e.target.value[0]||"";let d=n;d&&!E(d,t)&&(d="");const i=A(t,d);o==null||o(i);const{isCompleted:y,finalValue:x}=g(i);y&&(f==null||f(x)),d!==""?i.length-1<t?h(i.length):I(t):n===""&&i.length<=t&&h(t-1)},G=e=>{const t=e.target,n=t.selectionStart,d=t.selectionEnd,i=R(t),y=n===0&&d===0;if(t.value===e.key)e.preventDefault(),I(i);else if(S.backspace===e.key){if(!t.value)e.preventDefault(),h(i-1);else if(y){e.preventDefault();const x=A(i,"");o==null||o(x),x.length<=i&&h(i-1)}}else S.left===e.key?(e.preventDefault(),h(i-1)):S.right===e.key?(e.preventDefault(),h(i+1)):S.home===e.key?(e.preventDefault(),h(0)):S.end===e.key&&(e.preventDefault(),h(p.length-1))},H=e=>{const t=e.clipboardData.getData("text/plain"),n=e.target,d=p.findIndex(({character:l,inputRef:b})=>l===""||b.current===n),i=V(),y=pe(i,de(t),d).map((l,b)=>E(l,b)?l:""),x=N(y);o==null||o(x);const{isCompleted:v,finalValue:C}=g(x);v?(f==null||f(C),h(c-1)):h(x.length)},Q=e=>{if(!p.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:n}=g(m);F==null||F(n,t)}};return r.jsx(U,{display:"flex",gap:"20px",alignItems:"center",ref:a,className:`MuiOtpInput-Box ${D||""}`,...w,children:p.map(({character:e,inputRef:t},n)=>{const{onPaste:d,onFocus:i,onKeyDown:y,className:x,onBlur:v,...C}=typeof j=="function"?j(n)||{}:j||{};return r.jsx(le,{autoFocus:P?n===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${n+1} ${x||""}`,onPaste:l=>{l.preventDefault(),H(l),d==null||d(l)},onFocus:l=>{l.preventDefault(),l.target.select(),i==null||i(l)},onChange:z,onKeyDown:l=>{G(l),y==null||y(l)},onBlur:l=>{v==null||v(l),Q(l)},...C},n)})})}),me={forgotPasswordOtp:""};function xe(){const s=q(),a=J(),m=Y(),[c,P]=M.useState(me),[o,j]=M.useState({}),f=w=>{P({...c,forgotPasswordOtp:w})},k=(w=c)=>{const O={...o};return"forgotPasswordOtp"in w&&(O.forgotPasswordOtp=w.forgotPasswordOtp?"":"This field requires"),j({...O}),Object.values(O).every(u=>u==="")},D=async w=>{var O;w.preventDefault(),k()&&await se.otp({...c,email:(O=a==null?void 0:a.state)==null?void 0:O.email}).then(u=>{var g,p;B.success((g=u==null?void 0:u.data)==null?void 0:g.message),m("/reset-password",{state:{email:(p=a==null?void 0:a.state)==null?void 0:p.email}})}).catch(u=>{var g,p,R,V;(p=(g=u==null?void 0:u.response)==null?void 0:g.data)!=null&&p.message?B.error((V=(R=u==null?void 0:u.response)==null?void 0:R.data)==null?void 0:V.message):B.error(u.message)})},F=r.jsxs(r.Fragment,{children:[r.jsxs(L,{spacing:3,sx:{my:3},children:[r.jsx(he,{length:6,error:o.forgotPasswordOtp,onChange:f,helperText:o.forgotPasswordOtp,value:c.forgotPasswordOtp}),r.jsx("span",{style:{color:"red",fontSize:"10px"},children:o.forgotPasswordOtp})]}),r.jsx(oe,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:D,children:"Submit"})]});return r.jsxs(U,{sx:{...Z({color:ee(s.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[r.jsx(te,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),r.jsx(L,{alignItems:"center",justifyContent:"center",sx:{height:1},children:r.jsxs(ae,{sx:{p:5,width:1,maxWidth:420},children:[r.jsx(ne,{variant:"h4",children:"OTP Verification"}),r.jsx("br",{}),F]})})]})}function je(){return r.jsxs(r.Fragment,{children:[r.jsx(re,{children:r.jsx("title",{children:"OTP Verify | Smart Academy "})}),r.jsx(xe,{})]})}export{je as default};
